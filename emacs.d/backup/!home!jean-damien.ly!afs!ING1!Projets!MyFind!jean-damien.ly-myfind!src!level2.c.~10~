#include "myfind.h"

int get_expression(int argc, char *argv[], char **exp)
{
    int i = 1;
    for (; (i < argc) && (is_predicate(argv[i]) == 1); i++);
    char *s = "";
    if (argc == 0)
        s = argv[i];
    if (my_strcmp(s, "-name") == 0)
    {
        if (i + 1 < argc)
        {
            *exp = argv[i + 1];
            return 1;
        }
    }
    else if (my_strcmp(s, "-type") == 0)
    {
        if (i + 1 < argc)
        {
            *exp = argv[i + 1];
            return 1;
        }
    }
    else if ((my_strcmp(s, "-type") == 0) || (my_strcmp(s, "-name") == 0))
        warnx("missing argument to '%s'", argv[i]);
    return 0;
}

int check_expression(struct dirent *de, int got, char *exp)
{
    //printf("got %s, %d, %s\n", de->d_name, got, exp);
    if (got == 0)
        return 1;
    int i = fnmatch(exp, de->d_name, 0);
    return i;
}